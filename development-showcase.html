<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./css/development-showcase.css">
  <title>BuilderJS 0.0.4 - Simplified & Secure DOM Building</title>
</head>

<body>
  <button class="theme-toggle" onclick="toggleTheme()">🌙 Dark</button>
  <div id="showcase-container"></div>

  <script src="./builder.js"></script>
  <script>
    // Configure security validation for demo
    Builder.setValidationMode('warn'); // Show warnings in console for invalid tags

    // Create main showcase container
    const showcase = new Builder('div', { id: 'main-showcase', class: 'showcase-container' });

    // === HEADER ===
    showcase.add('header', { class: 'showcase-header' }, header => {
      header.add('h1', { innerText: 'BuilderJS 0.0.4 - Simplified & Secure DOM Building', class: 'main-title' });
      header.add('p', { innerText: 'Clean API with comprehensive security validation and improved performance', class: 'subtitle' });
    });

    // === API SIMPLIFICATION DEMO ===
    showcase.add('section', { class: 'demo-section highlight-section', id: 'api-simplification' }, section => {
      section.add('h2', { innerText: '🔥 New Simplified API' });
      section.add('p', {
        innerText: 'BuilderJS 0.0.4 introduces cleaner method names and powerful new features.',
        class: 'section-description'
      });

      section.add('div', { class: 'demo-grid' }, grid => {
        // New .add() method demo
        grid.add('div', { class: 'demo-card' }, card => {
          card.add('h3', { innerText: '.add() Method' });
          card.add('div', { class: 'code-block' }, codeBlock => {
            codeBlock.add('pre', {
              innerText: `// NEW 0.0.4 API - Clean & Simple
builder.add('div', {class: 'card'}, card => {
  card.add('h3', {innerText: 'Title'});
  card.add('p', {innerText: 'Content'});
});` });
          });

          card.add('div', { class: 'demo-output' }, output => {
            output.add('div', { class: 'example-card' }, exampleCard => {
              exampleCard.add('h4', { innerText: 'Built with .add()' });
              exampleCard.add('p', { innerText: 'Cleaner syntax, same power!' });
              exampleCard.add('div', { class: 'actions' }, actions => {
                actions.add('button', { innerText: 'Action 1', class: 'btn' });
                actions.add('button', { innerText: 'Action 2', class: 'btn' });
              });
            });
          });
        });

        // New .addAll() method demo
        grid.add('div', { class: 'demo-card' }, card => {
          card.add('h3', { innerText: '.addAll() Bulk Creation' });
          card.add('div', { class: 'code-block' }, codeBlock => {
            codeBlock.add('pre', {
              innerText: `// Efficient bulk element creation
nav.addAll([
  {tag: 'a', options: {href: '#home', innerText: 'Home'}},
  {tag: 'a', options: {href: '#about', innerText: 'About'}},
  {tag: 'a', options: {href: '#contact', innerText: 'Contact'}}
]);` });
          });

          card.add('div', { class: 'demo-output' }, output => {
            output.add('nav', { class: 'example-nav' }, nav => {
              nav.addAll([
                { tag: 'a', options: { href: '#home', innerText: 'Home', class: 'nav-link' } },
                { tag: 'a', options: { href: '#about', innerText: 'About', class: 'nav-link' } },
                { tag: 'a', options: { href: '#contact', innerText: 'Contact', class: 'nav-link' } }
              ]);
            });
          });
        });

        // New .render() method demo
        grid.add('div', { class: 'demo-card' }, card => {
          card.add('h3', { innerText: '.render() Positioning' });
          card.add('div', { class: 'code-block' }, codeBlock => {
            codeBlock.add('pre', {
              innerText: `// Flexible DOM insertion
builder.render('body');              // Append to body
builder.render('body', 'start');     // Insert at beginning
builder.render('#container', 'before'); // Insert before element` });
          });

          card.add('div', { class: 'demo-output' }, output => {
            output.add('div', { class: 'render-demo' }, demo => {
              demo.add('div', { innerText: 'Container', class: 'render-container', id: 'render-target' });
              demo.add('button', { innerText: 'Test .render()', class: 'btn render-btn' })
                .on('click', function () {
                  const testElement = new Builder('div', { innerText: 'Rendered!', class: 'rendered-item' });
                  testElement.render('#render-target', 'start');
                });
            });
          });
        });
      });
    });

    // === SECURITY FEATURES DEMO ===
    showcase.add('section', { class: 'demo-section', id: 'security-features' }, section => {
      section.add('h2', { innerText: '🔒 Security & Validation' });
      section.add('p', {
        innerText: 'BuilderJS 0.0.4 includes comprehensive tag validation and security features.',
        class: 'section-description'
      });

      section.add('div', { class: 'demo-grid' }, grid => {
        // Tag validation demo
        grid.add('div', { class: 'demo-card' }, card => {
          card.add('h3', { innerText: 'Tag Validation' });
          card.add('div', { class: 'code-block' }, codeBlock => {
            codeBlock.add('pre', {
              innerText: `// Check tag validity
if (Builder.isValidTag('div')) {
  builder.add('div', {class: 'safe'});
}

// Configure validation mode
Builder.setValidationMode('strict'); // Throws errors
Builder.setValidationMode('warn');   // Console warnings
Builder.setValidationMode('silent'); // Silent validation` });
          });

          card.add('div', { class: 'demo-output' }, output => {
            output.add('div', { class: 'validation-demo' }, demo => {
              demo.add('p', { innerText: 'Valid tags: ✅ div, span, p, h1-h6, etc.' });
              demo.add('p', { innerText: 'Invalid tags: ❌ custom-tag, xxx, 123' });
              demo.add('button', { innerText: 'Test Validation', class: 'btn' })
                .on('click', function () {
                  console.log('div is valid:', Builder.isValidTag('div'));
                  console.log('custom-tag is valid:', Builder.isValidTag('custom-tag'));
                  console.log('Current validation mode:', Builder.getValidationMode());
                });
            });
          });
        });

        // Security modes demo
        grid.add('div', { class: 'demo-card' }, card => {
          card.add('h3', { innerText: 'Validation Modes' });
          card.add('div', { class: 'code-block' }, codeBlock => {
            codeBlock.add('pre', {
              innerText: `// Three security levels
Builder.setValidationMode('strict'); // Throws errors
Builder.setValidationMode('warn');   // Logs warnings  
Builder.setValidationMode('silent'); // Silent validation

// Current mode
console.log(Builder.getValidationMode());` });
          });

          card.add('div', { class: 'demo-output' }, output => {
            output.add('div', { class: 'security-demo' }, demo => {
              demo.add('div', { class: 'mode-controls' }, controls => {
                controls.addAll([
                  {
                    tag: 'button',
                    options: { innerText: 'Strict Mode', class: 'btn mode-btn' },
                    callback: (btn) => {
                      btn.on('click', () => {
                        Builder.setValidationMode('strict');
                        console.log('Validation mode set to: strict');
                      });
                    }
                  },
                  {
                    tag: 'button',
                    options: { innerText: 'Warn Mode', class: 'btn mode-btn' },
                    callback: (btn) => {
                      btn.on('click', () => {
                        Builder.setValidationMode('warn');
                        console.log('Validation mode set to: warn');
                      });
                    }
                  },
                  {
                    tag: 'button',
                    options: { innerText: 'Silent Mode', class: 'btn mode-btn' },
                    callback: (btn) => {
                      btn.on('click', () => {
                        Builder.setValidationMode('silent');
                        console.log('Validation mode set to: silent');
                      });
                    }
                  }
                ]);
              });
              demo.add('p', { innerText: 'Current mode: ' + Builder.getValidationMode(), class: 'current-mode' });
            });
          });
        });
      });
    });

    // === SCOPED BUILDING DEMO (Updated) ===
    showcase.add('section', { class: 'demo-section', id: 'scoped-building' }, section => {
      section.add('h2', { innerText: '🆕 Enhanced Scoped Building' });
      section.add('p', {
        innerText: 'Build complex structures with the improved API while maintaining clean, readable code.',
        class: 'section-description'
      });

      section.add('div', { class: 'demo-grid' }, grid => {
        // Updated scoped building demo
        grid.add('div', { class: 'demo-card' }, card => {
          card.add('h3', { innerText: 'Improved Scoped .add()' });
          card.add('div', { class: 'code-block' }, codeBlock => {
            codeBlock.add('pre', {
              innerText: `parent.add('div', {class: 'card'}, card => {
  card.add('h3', {innerText: 'Title'});
  card.add('p', {innerText: 'Content'});
});` });
          });

          card.add('div', { class: 'demo-output' }, output => {
            output.add('div', { class: 'example-card' }, exampleCard => {
              exampleCard.add('h4', { innerText: 'Example Card' });
              exampleCard.add('p', { innerText: 'Built with improved .add() method!' });
              exampleCard.add('div', { class: 'actions' }, actions => {
                exampleCard.add('div', { class: 'actions' }, actions => {
                  actions.add('button', { innerText: 'Action 1', class: 'btn' });
                  actions.add('button', { innerText: 'Action 2', class: 'btn' });
                });
              });
            });
          });

          // Deep nesting with new API
          grid.add('div', { class: 'demo-card' }, card => {
            card.add('h3', { innerText: 'Deep Nesting' });
            card.add('div', { class: 'code-block' }, codeBlock => {
              codeBlock.add('pre', {
                innerText: `builder.add('section', section => {
  section.add('header', header => {
    header.add('nav', nav => {
      nav.addAll([
        {tag: 'a', options: {innerText: 'Home'}},
        {tag: 'a', options: {innerText: 'About'}}
      ]);
    });
  });
});` });
            });

            card.add('div', { class: 'demo-output' }, output => {
              output.add('section', { class: 'example-section' }, exampleSection => {
                exampleSection.add('header', { class: 'example-header' }, header => {
                  header.add('h4', { innerText: 'Site Header' });
                  header.add('nav', { class: 'example-nav' }, nav => {
                    nav.addAll([
                      { tag: 'a', options: { innerText: 'Home', class: 'nav-item' } },
                      { tag: 'a', options: { innerText: 'About', class: 'nav-item' } },
                      { tag: 'a', options: { innerText: 'Contact', class: 'nav-item' } }
                    ]);
                  });
                });
                exampleSection.add('div', { innerText: 'Clean nested structure with new API!', class: 'content' });
              });
            });
          });
        });
      });

      // === API MIGRATION COMPARISON ===
      showcase.add('section', { class: 'demo-section', id: 'api-migration' }, section => {
        section.add('h2', { innerText: '🔄 API Migration (0.0.3 → 0.0.4)' });

        section.add('div', { class: 'comparison-grid' }, grid => {
          // OLD API
          grid.add('div', { class: 'demo-card legacy-demo' }, card => {
            card.add('h3', { innerText: '❌ OLD: 0.0.3 API' });
            card.add('div', { class: 'code-block' }, codeBlock => {
              codeBlock.add('pre', {
                innerText: `// OLD 0.0.3 API
builder.addChild('div', {class: 'card'});
builder.addChildren([...]);
builder.build('section');
document.body.appendChild(builder.root);` });
            });
            card.add('p', {
              innerText: '⚠️ Replaced with cleaner, more intuitive methods in 0.0.4',
              class: 'warning'
            });
          });

          // NEW API
          grid.add('div', { class: 'demo-card modern-demo' }, card => {
            card.add('h3', { innerText: '✅ NEW: 0.0.4 API' });
            card.add('div', { class: 'code-block' }, codeBlock => {
              codeBlock.add('pre', {
                innerText: `// NEW 0.0.4 API - Simplified & Secure
builder.add('div', {class: 'card'});
builder.addAll([...]);
// .build() removed - use .add() instead
builder.render('body'); // Direct DOM insertion` });
            });

            card.add('div', { class: 'demo-output' }, output => {
              const example = new Builder('div', { class: 'modern-example' });
              example.add('div', { class: 'ex-header', innerText: 'Header' }, header => {
                header.add('div', { class: 'ex-title', innerText: 'Title' });
                header.add('div', { class: 'ex-nav', innerText: 'Navigation' });
              }).add('div', { class: 'ex-main', innerText: 'Main Content' }, main => {
                main.add('div', { class: 'ex-section', innerText: 'Section' });
              }).add('div', { class: 'ex-footer', innerText: 'Footer' });

              example.render(output.currentContext);
            });
          });
        });
      });

      // === PRACTICAL EXAMPLES (Updated) ===
      showcase.add('section', { class: 'demo-section', id: 'examples' }, section => {
        section.add('h2', { innerText: '🛠️ Practical Examples' });

        // Form example with new API
        section.add('div', { class: 'demo-card full-width' }, card => {
          card.add('h3', { innerText: 'Secure Form Building' });
          card.add('div', { class: 'demo-output' }, output => {
            output.add('form', { class: 'example-form' }, form => {
              form.addAll([
                {
                  tag: 'div',
                  options: { class: 'form-group' },
                  callback: (group) => {
                    group.addAll([
                      { tag: 'label', options: { innerText: 'Name', for: 'name' } },
                      { tag: 'input', options: { type: 'text', id: 'name', placeholder: 'Enter your name' } }
                    ]);
                  }
                },
                {
                  tag: 'div',
                  options: { class: 'form-group' },
                  callback: (group) => {
                    group.addAll([
                      { tag: 'label', options: { innerText: 'Email', for: 'email' } },
                      { tag: 'input', options: { type: 'email', id: 'email', placeholder: 'Enter your email' } }
                    ]);
                  }
                },
                {
                  tag: 'div',
                  options: { class: 'form-actions' },
                  callback: (actions) => {
                    actions.addAll([
                      { tag: 'button', options: { type: 'submit', innerText: 'Submit', class: 'btn primary' } },
                      { tag: 'button', options: { type: 'reset', innerText: 'Reset', class: 'btn secondary' } }
                    ]);
                  }
                }
              ]);
            });
          });
        });

        // Interactive demo with security
        section.add('div', { class: 'demo-card full-width' }, card => {
          card.add('h3', { innerText: 'Interactive Example with Validation' });
          card.add('div', { class: 'demo-output' }, output => {
            output.add('div', { class: 'interactive-demo' }, demo => {
              const addButton = demo.add('button', { innerText: 'Add Secure Item', class: 'add-btn' });
              const container = demo.add('div', { class: 'items-container' });

              // Add interactivity with security validation
              addButton.on('click', function () {
                const timestamp = new Date().toLocaleTimeString();

                // Use validation before creating elements
                if (Builder.isValidTag('div') && Builder.isValidTag('span')) {
                  const item = new Builder('div', { class: 'dynamic-item' });
                  item.addAll([
                    { tag: 'span', options: { innerText: `Secure item added at ${timestamp}` } },
                    {
                      tag: 'button',
                      options: { innerText: '×', class: 'remove-btn' },
                      callback: (removeBtn) => {
                        removeBtn.on('click', function () {
                          this.root.parentElement.remove();
                        });
                      }
                    }
                  ]);

                  item.render(container.currentContext);
                } else {
                  console.warn('Invalid tags detected!');
                }
              });
            });
          });
        });

        // Performance comparison
        section.add('div', { class: 'demo-card full-width' }, card => {
          card.add('h3', { innerText: 'Performance & Bundle Size' });
          card.add('div', { class: 'performance-info' }, info => {
            info.addAll([
              { tag: 'p', options: { innerText: '⚡ ~15% smaller bundle size (dead code elimination)' } },
              { tag: 'p', options: { innerText: '🚀 Faster DOM operations (direct manipulation)' } },
              { tag: 'p', options: { innerText: '🧠 Reduced memory usage (WeakMap event tracking)' } },
              { tag: 'p', options: { innerText: '🔒 Enhanced security (comprehensive validation)' } }
            ]);
          });
        });
      });

      // === FEATURES SUMMARY (Updated) ===
      showcase.add('footer', { class: 'showcase-footer' }, footer => {
        footer.add('h3', { innerText: 'BuilderJS 0.0.4 Features' });

        footer.add('div', { class: 'features-grid' }, grid => {
          const features = [
            { title: '🔥 Simplified API', desc: '.add(), .addAll(), .render() methods' },
            { title: '🔒 Security First', desc: 'Comprehensive tag validation and XSS protection' },
            { title: '⚡ Better Performance', desc: '15% smaller bundle, faster DOM operations' },
            { title: '�️ Validation Modes', desc: 'Strict, warn, or silent error handling' },
            { title: '� Bulk Operations', desc: 'Efficient .addAll() for multiple elements' },
            { title: '🎯 Flexible Rendering', desc: 'Position-aware DOM insertion with .render()' }
          ];

          features.forEach(feature => {
            grid.add('div', { class: 'feature-card' }, card => {
              card.addAll([
                { tag: 'h4', options: { innerText: feature.title } },
                { tag: 'p', options: { innerText: feature.desc } }
              ]);
            });
          });
        });

        footer.add('p', {
          innerText: 'BuilderJS 0.0.4 - Simplified, Secure, Fast DOM Building',
          class: 'footer-description'
        });
      });

      // Render the showcase
      showcase.render('#showcase-container');

      console.log('✅ BuilderJS 0.0.4 Showcase loaded successfully!');
      console.log('🔥 New simplified API with comprehensive security validation');
      console.log('⚡ Improved performance and reduced bundle size');
      console.log('🔒 Current validation mode:', Builder.getValidationMode());
    }); // End of showcase.add() scope

    // Theme toggle functionality (global scope)
    function toggleTheme() {
      const body = document.body;
      const toggle = document.querySelector('.theme-toggle');

      if (body.getAttribute('data-theme') === 'dark') {
        body.removeAttribute('data-theme');
        toggle.textContent = '🌙 Dark';
        localStorage.setItem('theme', 'light');
      } else {
        body.setAttribute('data-theme', 'dark');
        toggle.textContent = '☀️ Light';
        localStorage.setItem('theme', 'dark');
      }
    }

    // Load saved theme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.body.setAttribute('data-theme', 'dark');
      document.querySelector('.theme-toggle').textContent = '☀️ Light';
    }
  </script>
</body>

</html>